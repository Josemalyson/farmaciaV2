<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE HTML>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	template="/WEB-INF/template/template.xhtml">

	<ui:define name="conteudo">
		<h:form id="compra" prependId="false">

			<h1>Efetuar Venda</h1>

			<p:messages />

			<p:fieldset legend="Adicionar Produto">
				<div class="ui-g">
					<div class="ui-g-8">
						<p:outputLabel value="Pesquisar produtos: " for="dd" />
						<p:autoComplete id="dd" dropdown="true"
							value="#{pedidoControlador.vendaVo.produto}"
							converter="entityConverter" var="produto"
							itemLabel="#{produto.descricaoProduto}" itemValue="#{produto}"
							completeMethod="#{pedidoControlador.autoCompleteProduto}">
							<p:ajax event="itemSelect" update="@form"
								listener="#{pedidoControlador.adiconarProduto()}" />
						</p:autoComplete>
					</div>
					<br />
					<div class="ui-g-4">
						<p:outputLabel value="Data do pedido: " />
						<p:outputLabel value="#{pedidoControlador.vendaVo.dtPedido}">
							<f:convertDateTime pattern="dd/MM/yyyy" />
						</p:outputLabel>
					</div>
				</div>
			</p:fieldset>

			<br />

			<p:fieldset legend="Adicionar Cliente">
				<div class="ui-g">
					<div class="ui-g-2">
						<p:outputLabel value="Pesquisar Cliente:  " for="cc" />
						<p:autoComplete id="cc" dropdown="true"
							value="#{pedidoControlador.vendaVo.cliente}"
							converter="entityConverter" var="cliente"
							itemLabel="#{cliente.nome}" itemValue="#{cliente}"
							completeMethod="#{pedidoControlador.autoCompleteCliente}" />
					</div>

					<br />

					<div class="ui-g-3">
						<p:outputLabel value="Nome do CLiente: " />
						<p:outputLabel value="Jose" />
					</div>
				</div>
			</p:fieldset>

			<br></br>

			<p:fieldset legend="Listas de produtos">
				<p:dataTable id="produtos" editable="true"
					emptyMessage="Não existe Produtos cadastrados."
					value="#{pedidoControlador.vendaVo.produtoVoList}" var="produtoVo">

					<p:ajax event="rowEdit" listener="#{dtEditView.onRowEdit}"
						update="@form" />

					<p:ajax event="rowEditCancel" listener="#{dtEditView.onRowCancel}"
						update="@form" />

					<p:column headerText="Quantidade">
						<p:cellEditor>
							<f:facet name="output">
								<h:outputText value="#{produtoVo.quantidade}" />
							</f:facet>
							<f:facet name="input">
								<p:inputText id="quantidade" value="#{produtoVo.quantidade}"
									style="width:100%" />
							</f:facet>
						</p:cellEditor>
					</p:column>


					<p:column headerText="Descrição do Produto">
						<h:outputLabel value="#{produtoVo.produto.descricaoProduto}" />
					</p:column>

					<p:column headerText="Preço de custo">
						<h:outputLabel value="#{produtoVo.produto.precoCusto}" />
					</p:column>

					<p:column headerText="Preço de venda">
						<h:outputLabel value="#{produtoVo.produto.precoVenda}" />
					</p:column>


					<p:column headerText="Ações">
						<p:rowEditor />
						<p:commandButton id="idExcluir" icon="ui-icon-trash"
							title="Excluir"
							actionListener="#{produtoControlador.excluirProduto(produto)}"
							update="@form">
							<p:confirm header="Confirmar exclusão"
								message="Deseja realmente excluir?" icon="ui-icon-alert" />

							<p:confirmDialog global="true" showEffect="fade"
								hideEffect="fade">

								<p:commandButton value="Sim" type="button"
									styleClass="ui-confirmdialog-yes" icon="ui-icon-check" />

								<p:commandButton value="Não" type="button"
									styleClass="ui-confirmdialog-no" icon="ui-icon-close" />
							</p:confirmDialog>
						</p:commandButton>
					</p:column>


				</p:dataTable>
			</p:fieldset>

			<br />

			<p:fieldset legend="Total da venda">
				<div class="ui-g">
					<div class="ui-g-4">
						<p:outputLabel value="Valor total da compra R$: " />
						<p:outputLabel value="1200.00 " />
					</div>
					<div class="ui-g-4">
						<p:outputLabel value="Valor do desconto R$: " />
						<p:outputLabel value="1200.00 " />
					</div>
					<div class="ui-g-4">
						<p:outputLabel value="Valor total da venda R$: " />
						<p:outputLabel value="1200.00 " />
					</div>
				</div>
			</p:fieldset>

			<br />

			<p:commandButton id="idSalvar" value="Salvar" icon="ui-icon-check"
				title="Salvar" actionListener="#{clienteControlador.salvar()}"
				update="@form" oncomplete="PF('incluirCliente').hide();" />

			<p:commandButton id="idCacelar" value="Cancelar"
				icon="ui-icon-cancel" title="Cancelar"
				onclick="PF('incluirCliente').hide();" />

			<br />

		</h:form>

	</ui:define>
</ui:composition>
